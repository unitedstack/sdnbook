# 数据中心的概念和结构

----

## 引言

在数据中心出现以前，计算资源、存储资源和连接它们的网络资源都位于企业用户
的桌面 PC 上。随着存储技术的发展和合作需求的出现，企业安装了部门服务器来
提供这些资源。然而这些服务器只能提供本地服务或者有限服务，随着时间的发展，
部门服务器无法处理负荷的增长以及用户更大范围合作的需求，因而迁移到了更加
集中化的数据中心。数据中心简化了软硬件的管理和维护，也更便于所有企业用户之间
资源共享。

## 数据中心的概念

数据中心（data center），指用于安置计算机系统及相关部件的设施，
例如电信和储存系统。一般它包含冗余和备用电源，冗余数据通信连接，
环境控制（例如空调、灭火器）和各种安全设备。
大型数据中心消耗的电约与一个小城镇工业业务规模一样多。
(注：来自[维基百科](https://zh.wikipedia.org/wiki/数据中心))


## 多租户数据中心

在多租户数据中心内部，用户必须能够访问自己私有的计算、存储和网络资源的虚拟
切片，而这些资源对其他租户是保密的。

在不同的环境里，租户这个概念有不同的含义。对于提供公有云服务的服务运营商数据中
心来说，它是指某客户。对于实现了私有云解决方案的企业数据中心来说，它可能意味
着某部门（可以看成是一个内部客户）。虽然不是完全互斥，但是多租户和多用户或者
多企业的概念是不同的。租户是在用户和企业边界之上的一个概念。在公有云和私有云中
多租户都是常见的，而不仅仅局限在基础设施即服务（IaaS）数据中心里。


## 虚拟化多租户数据中心

虚拟化多租户数据中心使得多个租户可以共享同一个数据中心，同时为他们提供对资源
虚拟机化切片的私有访问。数据中心网络可能是多层网络，尽管最初是从骨干 - 枝叶 这
样的两层网络设计开始的，但后续的发展导致了第三层汇聚层的出现。


参考文档：

 * 软件定义网络 —— SDN 和 OpenFlow 解析（人民邮电出版社）

## 三层网络结构

三层网络架构采用层次化模型设计，即将复杂的网络设计分成几个层次，
每个层次着重于某些特定的功能，这样就能够使一个复杂的大问题变成许多简单的小问题。
三层网络架构设计的网络有三个层次：

 * 核心层（网络的高速交换主干）
 * 汇聚层（提供基于策略的连接）
 * 接入层 （将工作站接入网络）。

### 核心层及其功能
 
网络主干部分称为核心层，核心层的主要目的在于通过高速转发通信，提供快速，
可靠的骨干传输结构，因此核心层交换机应拥有更高的可靠性，性能和吞吐量。
 
核心层的功能主要是实现骨干网络之间的优化传输，骨干层设计任务的重点通常是冗余能
力、可靠性和高速的传输。网络的控制功能最好尽量少在骨干层上实施。

核心层一直被认为是所有流量的最终承受者和汇聚者，
所以对核心层的设计以及网络设备的要求十分严格。核心层设备将占投资的主要部分。

### 汇聚层及其功能
 
将位于接入层和核心层之间的部分称为分布层或汇聚层，
汇聚层交换层是多台接入层交换机的汇聚点，它必须能够处理来自接入层设备的所有通信量，
并提供到核心层的上行链路，因此汇聚层交换机与接入层交换机比较，
需要更高的性能，更少的接口和更高的交换速率。


### 接入层及其功能

通常将网络中直接面向用户连接或访问网络的部分称为接入层，
接入层目的是允许终端用户连接到网络，因此接入层交换机具有低成本和高端口密度特性。
 
我们在接入层设计上主张使用性能价格比高的设备。
接入层是最终用户与网络的接口，它应该提供即插即用的特性，
同时应该非常易于使用和维护。当然我们也应该考虑端口密度的问题。
 
接入层为用户提供了在本地网段访问应用系统的能力，
主要解决相邻用户之间的互访需求，并且为这些访问提供足够的带宽，
接入层还应当适当负责一些用户管理功能（如地址认证、用户认证、计费管理等），
以及用户信息收集工作（如用户的 IP 地址、MAC 地址、访问日志等）。


 ![three][1]


## 叶脊拓扑网络

叶脊网络拓扑结构现在事实上是一个标准 —— 供应商的各种以太网产品设计基本
都可以应用在这种结构。
因为叶脊网络拓扑结构有几个理想的特性，能充分发挥网络的优势。

所有横向的主机在网络位置上是平行的。叶脊网络扩大接入和汇聚层。
一个主机可以通过叶支交换机 (leaf) 和另一个叶支交换机上的主机进行通信，
而且是独立的通道。这种网络可以大大提高网络的效率，
特别是高性能计算集群或高频流量通信设备。

脊网络拓扑结构提供了解决横向网络连接的传输瓶颈，而且提供了高度的扩展性，
它几乎能适应所有大中小型数据中心。
可以预见，所有企业的 IT 建设都是走向收敛型和高层次的虚拟化型叶脊网络结构。

叶脊拓扑网络结构不可能是完美的。其中一个缺点就是，
交换机的增多使得网络规模变大。叶脊拓扑网络结构的数据中心需要按客户端的数量，
相应比例的增加交换机和网络设备。随着主机的增加，
需要大量的叶交换机 (leaf) 上行连接到脊交换机 (spine)。


 ![spine_leaf][2]


参考文档：

 * [为什么要使用叶脊（leaf-spine）拓扑网络？](http://database.ctocio.com.cn/422/13176422.shtml)


[1]: ../../images/sdn/three.png
[2]: ../../images/sdn/spine_leaf.png
