# 网络安全

---

信息安全中的三要素被简称为CIA三要素，分别对应了机密性，完整性和可用性，所有的网络安全设备都是为了保证在信息通信过程中的这三个特性。

我们借用设备的演进过程来阐述网络安全中所体现的设备与解决方案。

## 保护内网的安全

### 有状态的访问控制
在网络发展初始，并没有专业的安全设备，那么如果希望能够将企业的内网与外网隔离开来并且仅仅放行有限的内外网访问权限，最简单的实现方式就是在出口路由器上配置相应的访问控制列表，由于访问控制列表同时可以记录会话的状态，就实现了简单的基于状态的访问控制。

基本上常见的路由器都支持相应的功能，通过访问控制列表的配置可以实现最简单的针对内网的保护。

### 防火墙
随着时间的推移，出口路由器的负担开始加重，逐渐演进出了专业的设备来实现相应的功能，那就是防火墙。

最初的防火墙的实现方式可以理解为一台专门维护各种访问策略的设备，同时为客户提供了较为友好的管理配置方式，随着企业网络拓扑的逐渐复杂，逐渐演进出了基于zone的防火墙，各厂商为客户预置了丰富的场景，企业在购买了防火墙之后只需要针对自己的网络连线做出相应的简单配置即可使用。后来又逐渐发展出了下一代防火墙，让访问控制策略可以从网络层逐渐提高到应用层，同时提供了各种应用协议的管理与识别等功能，但其工作原理基本类似。

防火墙从形态上来说有两种主要形态，分别为软件和硬件，软件以CheckPoint为代表，硬件则以Palo Auto为代表，分别为客户提供软件/硬件的安全解决方案。

### 入侵检测、入侵防御与统一风险管理
仅仅能够配置策略是不足够的，很多貌似正常的流量经过组合后其实可以实现攻击者的某些功能，那么就需要专业的设备来对很多流量进行特征分析，并且识别其中的恶意流量。

最初的实现方式常见为在网络中旁路一台相应的检测设备，将所有的网络流量镜像到该设备上，此设备则会通过其内部逻辑去判断网络中是否存在恶意流量，这样的设备则被称为入侵检测系统。

入侵检测的特点是旁路流量，可以不影响在网的网络性能和吞吐，但是也带来了相应的问题：只能检测到恶意流量，无法对其相应的行为进行阻止，随着网络设备的性能的提升，厂商逐渐开始将相应的设备从旁路改为在线，这样的设备我们称之为入侵防御系统。

随着业务场景的逐渐丰富，客户主要对网络设备也提出了更多的要求，比如防病毒、数据泄露保护等内容，厂商也逐渐开始将满足这一类功能的特性集中在统一的安全设备上，这样的设备被称之为UTM。

## 服务提供商的安全防护
上文提到的安全设备基本的防护思想是一致的，更多的重点是为了在有限的外部对内的访问中保护内部网络的安全，而在实际场景中服务提供商所需要的是针对其特定的对外服务进行相应的保护，那么就催生了以下两个设备的出现。

### WAF
WAF全称为Web Application Firewall，其主要目的是为了保护后端的站点的安全，当Web应用越来越为丰富的同时，Web服务器以其强大的计算能力、处理性能及蕴含的较高价值逐渐成为主要攻击目标。

与防火墙不同，WAF工作在应用层，因此对Web应用防护具有先天的技术优势。基于对Web应用业务和逻辑的深刻理解，WAF对来自Web应用程序客户端的各类请求进行内容检测和验证，确保其安全性与合法性，对非法的请求予以实时阻断，从而对各类网站站点进行有效防护。针对的常见攻击包括SQL注入、网页篡改等等。

### 流量清洗
针对服务供应商的攻击除了以上方式外其实存在一种最简单粗暴的方式，即通过大量的无效网络流量来占用服务器上的资源，以实现服务器无法响应正常业务请求的目的，这样的攻击被称之为Deny of Service攻击。

如果只是简单的DoS攻击，其实很容易防御，只需要找到攻击者的网络地址并将其流量拒绝即可，而攻击者也意识到了相应的问题，于是攻击者将会在互联网中寻找大量安全防护较为脆弱的终端，将其攻破后进行远程控制，从世界各地发起DoS攻击，这种攻击则被称之为DDoS攻击，这样的攻击的特征更难以提取，而且流量的发起者通常都是真实的应用和终端，针对这类攻击的防护难度则进一步加大。

针对DDoS攻击，厂商逐渐形成了统一的防护手段，提供这一防护功能的设备通常称之为流量清洗设备，这类设备的位置通常在企业网络入口或运营商网络入口，所有经过此处的流量都会被引流到相应的设备上进行过滤和分析，设备会通过一系列的组合特征判断去分析哪些流量是正常的网络访问流量，哪些流量是攻击者发起的攻击流量，同时也会结合反向探测、黑名单以及图片验证等多种辅助手段，最终将正常的访问流量回送到网络上，将攻击流量进行丢弃，以实现流量清洗的功能。